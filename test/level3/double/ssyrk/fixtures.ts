/* This is a conversion from BLAS to Typescript/Javascript
Copyright (C) 2018  Jacob K.F. Bogers  info@mail.jacob-bogers.com

This program is free software: you can redistribute it and/or modify
it under the terms of the GNU General Public License as published by
the Free Software Foundation, either version 3 of the License, or
(at your option) any later version.

This program is distributed in the hope that it will be useful,
but WITHOUT ANY WARRANTY; without even the implied warranty of
MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
GNU General Public License for more details.

You should have received a copy of the GNU General Public License
along with this program.  If not, see <http://www.gnu.org/licenses/>.
*/

import { matrix_mxn } from '../../../matrices';

export const fixture = {
    ssyrk: {
        case0: {
            desc: '(trivial) n=0',
            input: {
                cmd: 'xdebug',
                uplo: 'l',
                trans: 't',
                n: 0,
                k: 3,
                alpha: 0.2,
                beta: 1,
                lda: 6,
                ldc: 6,
                a: matrix_mxn(6, 6).real(),
                c: matrix_mxn(6, 6).real(),
            },
            expect: {
                c: matrix_mxn(6, 6).real().toArr(),
            },
        },
        case1: {
            desc: '(trivial) k=0, beta=1',
            input: {
                cmd: 'xdebug',
                uplo: 'l',
                trans: 't',
                n: 5,
                k: 0,
                alpha: 0.2,
                beta: 1,
                lda: 6,
                ldc: 6,
                a: matrix_mxn(6, 6).real(),
                c: matrix_mxn(6, 6).real(),
            },
            expect: {
                c: matrix_mxn(6, 6).real().toArr(),
            },
        },
        case2: {
            desc: '(near trivial) uplo="l",alpha=0 beta=0.25',
            input: {
                cmd: 'xdebug',
                uplo: 'l',
                trans: 't',
                n: 5,
                k: 3,
                alpha: 0,
                beta: 0.25,
                lda: 6,
                ldc: 6,
                a: matrix_mxn(6, 6).real(),
                c: matrix_mxn(6, 6).real(),
            },
            expect: {
                c: [
                    0.31573855876922607,
                    -8.1558339297771454e-2,
                    0.33244982361793518,
                    0.31810733675956726,
                    0.10366035997867584,
                    -1.5399500131607056,
                    -0.92856705188751221,
                    -7.3680110275745392e-2,
                    -1.4417931670323014e-3,
                    0.60116332769393921,
                    0.1908983588218689,
                    -0.79900926351547241,
                    -1.147657036781311,
                    -0.28946158289909363,
                    -7.4803777039051056e-2,
                    -0.10287770628929138,
                    6.3055865466594696e-2,
                    -0.89192110300064087,
                    0.43568331003189087,
                    -1.2375384569168091,
                    -0.22426788508892059,
                    9.4348914921283722e-2,
                    3.3334091305732727e-2,
                    0.80418950319290161,
                    -5.7106774300336838e-2,
                    0.50360798835754395,
                    1.0857694149017334,
                    -0.69095385074615479,
                    -0.32114982604980469,
                    4.6726170927286148e-2,
                    -0.23570655286312103,
                    -0.54288828372955322,
                    -0.43331032991409302,
                    -0.64947164058685303,
                    0.72675073146820068,
                    1.151911735534668,
                ],
            },
        },
        case3: {
            desc: '(near trivial) uplo="u",alpha=0 beta=0',
            input: {
                cmd: 'xdebug',
                uplo: 'u',
                trans: 't',
                n: 5,
                k: 3,
                alpha: 0,
                beta: 0,
                lda: 6,
                ldc: 6,
                a: matrix_mxn(6, 6).real(),
                c: matrix_mxn(6, 6).real(),
            },
            expect: {
                c: [
                    0.0,
                    -0.32623335719108582,
                    1.3297992944717407,
                    1.272429347038269,
                    0.41464143991470337,
                    -1.5399500131607056,
                    0.0,
                    0.0,
                    -5.7671726681292057e-3,
                    2.4046533107757568,
                    0.76359343528747559,
                    -0.79900926351547241,
                    0.0,
                    0.0,
                    0.0,
                    -0.41151082515716553,
                    0.25222346186637878,
                    -0.89192110300064087,
                    0.0,
                    0.0,
                    0.0,
                    0.0,
                    0.13333636522293091,
                    0.80418950319290161,
                    0.0,
                    0.0,
                    0.0,
                    0.0,
                    0.0,
                    4.6726170927286148e-2,
                    -0.23570655286312103,
                    -0.54288828372955322,
                    -0.43331032991409302,
                    -0.64947164058685303,
                    0.72675073146820068,
                    1.151911735534668,
                ],
            },
        },
        case4: {
            desc: 'trans="n", uplo="u",alpha=0.5 beta=0',
            input: {
                cmd: 'xdebug',
                uplo: 'u',
                trans: 'n',
                n: 5,
                k: 3,
                alpha: 0.5,
                beta: 0,
                lda: 6,
                ldc: 6,
                a: (() => {
                    const m = matrix_mxn(6, 6).real();
                    m.r[0] = 0;
                    return m;
                })(),
                c: matrix_mxn(6, 6).real(),
            },
            expect: {
                c: [
                    1.0896767219623626,
                    -0.32623335719108582,
                    1.3297992944717407,
                    1.272429347038269,
                    0.41464143991470337,
                    -1.5399500131607056,
                    0.30293515680899219,
                    0.13853817486127573,
                    -5.7671726681292057e-3,
                    2.4046533107757568,
                    0.76359343528747559,
                    -0.79900926351547241,
                    0.1743757654544599,
                    -0.17275695285948342,
                    0.92896455240352616,
                    -0.41151082515716553,
                    0.25222346186637878,
                    -0.89192110300064087,
                    -0.88030427069764272,
                    -0.50234640364711325,
                    0.90066892658162279,
                    3.7853875737252878,
                    0.13333636522293091,
                    0.80418950319290161,
                    -0.49925686794892066,
                    -0.21666273278065828,
                    0.23575852432294281,
                    1.1299933669898525,
                    0.40930956641226368,
                    4.6726170927286148e-2,
                    -0.23570655286312103,
                    -0.54288828372955322,
                    -0.43331032991409302,
                    -0.64947164058685303,
                    0.72675073146820068,
                    1.151911735534668,
                ],
            },
        },
        case5: {
            desc: 'trans="n",uplo="l",alpha=0.5 beta=0.1',
            input: {
                cmd: 'xdebug',
                uplo: 'l',
                trans: 'n',
                n: 5,
                k: 3,
                alpha: 0.5,
                beta: 0.1,
                lda: 6,
                ldc: 6,
                a: (() => {
                    const m = matrix_mxn(6, 6).real();
                    m.r[0] = 0;
                    return m;
                })(),
                c: matrix_mxn(6, 6).real(),
            },
            expect: {
                c: [
                    1.2159721473520015,
                    0.27031182060375802,
                    0.30735569688318931,
                    -0.75306133409774834,
                    -0.45779272333958643,
                    -1.5399500131607056,
                    -0.92856705188751221,
                    0.10906613031180989,
                    -0.17333367013489009,
                    -0.26188106898632491,
                    -0.14030338811406784,
                    -0.79900926351547241,
                    -1.147657036781311,
                    -0.28946158289909363,
                    0.89904304114204048,
                    0.85951784345270732,
                    0.26098087088542293,
                    -0.89192110300064087,
                    0.43568331003189087,
                    -1.2375384569168091,
                    -0.22426788508892059,
                    3.8231271402561644,
                    1.1433270037108323,
                    0.80418950319290161,
                    -5.7106774300336838e-2,
                    0.50360798835754395,
                    1.0857694149017334,
                    -0.69095385074615479,
                    0.28084963407813968,
                    4.6726170927286148e-2,
                    -0.23570655286312103,
                    -0.54288828372955322,
                    -0.43331032991409302,
                    -0.64947164058685303,
                    0.72675073146820068,
                    1.151911735534668,
                ],
            },
        },
        case6: {
            desc: 'trans="n",uplo="u",alpha=0.5 beta=1',
            input: {
                cmd: 'xdebug',
                uplo: 'l',
                trans: 'n',
                n: 5,
                k: 3,
                alpha: 0.5,
                beta: 1,
                lda: 6,
                ldc: 6,
                a: (() => {
                    const m = matrix_mxn(6, 6).real();
                    m.r[0] = 0;
                    return m;
                })(),
                c: matrix_mxn(6, 6).real(),
            },
            expect: {
                c: [
                    2.3526309570392669,
                    -2.3298200382093626e-2,
                    1.5041750599262007,
                    0.39212507634062632,
                    -8.4615428034217288e-2,
                    -1.5399500131607056,
                    -0.92856705188751221,
                    -0.15618226624170584,
                    -0.17852412552761263,
                    1.9023069071286436,
                    0.5469307025068173,
                    -0.79900926351547241,
                    -1.147657036781311,
                    -0.28946158289909363,
                    0.62974944424732193,
                    0.48915810142445731,
                    0.48798198618932154,
                    -0.89192110300064087,
                    0.43568331003189087,
                    -1.2375384569168091,
                    -0.22426788508892059,
                    4.1627832334104227,
                    1.2633297322127834,
                    0.80418950319290161,
                    -5.7106774300336838e-2,
                    0.50360798835754395,
                    1.0857694149017334,
                    -0.69095385074615479,
                    -0.87528973778695507,
                    4.6726170927286148e-2,
                    -0.23570655286312103,
                    -0.54288828372955322,
                    -0.43331032991409302,
                    -0.64947164058685303,
                    0.72675073146820068,
                    1.151911735534668,
                ],
            },
        },
        case7: {
            desc: 'trans="t",uplo="u",alpha=0.5 beta=1',
            input: {
                cmd: 'xdebug',
                uplo: 'u',
                trans: 't',
                n: 5,
                k: 3,
                alpha: 0.5,
                beta: 1,
                lda: 6,
                ldc: 6,
                a: (() => {
                    const m = matrix_mxn(6, 6).real();
                    m.r[0] = 0;
                    return m;
                })(),
                c: matrix_mxn(6, 6).real(),
            },
            expect: {
                c: [
                    2.2003514185377573,
                    -0.32623335719108582,
                    1.3297992944717407,
                    1.272429347038269,
                    0.41464143991470337,
                    -1.5399500131607056,
                    -0.88432782349316796,
                    0.17984464316481136,
                    -5.7671726681292057e-3,
                    2.4046533107757568,
                    0.76359343528747559,
                    -0.79900926351547241,
                    -1.2993890446585055,
                    0.28689460800591537,
                    0.44600207334231445,
                    -0.41151082515716553,
                    0.25222346186637878,
                    -0.89192110300064087,
                    0.48843083507645613,
                    -1.2568084045324375,
                    -0.2616133033068142,
                    1.2632043913204543,
                    0.13333636522293091,
                    0.80418950319290161,
                    0.58267406427225765,
                    0.45277902880236237,
                    0.88321202139700339,
                    -1.1367628165609722,
                    -0.56671059822693159,
                    4.6726170927286148e-2,
                    -0.23570655286312103,
                    -0.54288828372955322,
                    -0.43331032991409302,
                    -0.64947164058685303,
                    0.72675073146820068,
                    1.151911735534668,
                ],
            },
        },
        case8: {
            desc: 'trans="t",uplo="l",alpha=0.5 beta=1',
            input: {
                cmd: 'xdebug',
                uplo: 'l',
                trans: 't',
                n: 5,
                k: 3,
                alpha: 0.5,
                beta: 1,
                lda: 6,
                ldc: 6,
                a: (() => {
                    const m = matrix_mxn(6, 6).real();
                    m.r[0] = 0;
                    return m;
                })(),
                c: matrix_mxn(6, 6).real(),
            },
            expect: {
                c: [
                    2.2003514185377573,
                    -0.28199412879674157,
                    1.1780672865945463,
                    1.3251768720828343,
                    1.0544222784872979,
                    -1.5399500131607056,
                    -0.92856705188751221,
                    0.17984464316481136,
                    0.5705890182368798,
                    2.3853833631601282,
                    0.71276447573229396,
                    -0.79900926351547241,
                    -1.147657036781311,
                    -0.28946158289909363,
                    0.44600207334231445,
                    -0.44885624337505914,
                    4.9666068361648774e-2,
                    -0.89192110300064087,
                    0.43568331003189087,
                    -1.2375384569168091,
                    -0.22426788508892059,
                    1.2632043913204543,
                    -0.31247260059188642,
                    0.80418950319290161,
                    -5.7106774300336838e-2,
                    0.50360798835754395,
                    1.0857694149017334,
                    -0.69095385074615479,
                    -0.56671059822693159,
                    4.6726170927286148e-2,
                    -0.23570655286312103,
                    -0.54288828372955322,
                    -0.43331032991409302,
                    -0.64947164058685303,
                    0.72675073146820068,
                    1.151911735534668,
                ],
            },
        },
        case9: {
            desc: 'trans="t",uplo="l",alpha=0.5 beta=-.3',
            input: {
                cmd: 'xdebug',
                uplo: 'l',
                trans: 't',
                n: 5,
                k: 3,
                alpha: 0.5,
                beta: -0.3,
                lda: 6,
                ldc: 6,
                a: (() => {
                    const m = matrix_mxn(6, 6).real();
                    m.r[0] = 0;
                    return m;
                })(),
                c: matrix_mxn(6, 6).real(),
            },
            expect: {
                c: [
                    0.55851089788219399,
                    0.14210923944067463,
                    -0.55067181207115956,
                    -0.3289812942354553,
                    0.51538840165527233,
                    -1.5399500131607056,
                    -0.92856705188751221,
                    0.56298122011202878,
                    0.57808634277419779,
                    -0.74066596951405672,
                    -0.27990699924416734,
                    -0.79900926351547241,
                    -1.147657036781311,
                    -0.28946158289909363,
                    0.83498171751230199,
                    8.6107834234847358e-2,
                    -0.27822443507138162,
                    -0.89192110300064087,
                    0.43568331003189087,
                    -1.2375384569168091,
                    -0.22426788508892059,
                    0.77259002923087217,
                    -0.48580987697118994,
                    0.80418950319290161,
                    -5.7106774300336838e-2,
                    0.50360798835754395,
                    1.0857694149017334,
                    -0.69095385074615479,
                    1.1032685125456698,
                    4.6726170927286148e-2,
                    -0.23570655286312103,
                    -0.54288828372955322,
                    -0.43331032991409302,
                    -0.64947164058685303,
                    0.72675073146820068,
                    1.151911735534668,
                ],
            },
        },
        case10: {
            desc: 'trans="t",uplo="l",alpha=0.5 beta=0',
            input: {
                cmd: 'xdebug',
                uplo: 'l',
                trans: 't',
                n: 5,
                k: 3,
                alpha: 0.5,
                beta: 0,
                lda: 6,
                ldc: 6,
                a: (() => {
                    const m = matrix_mxn(6, 6).real();
                    m.r[0] = 0;
                    return m;
                })(),
                c: matrix_mxn(6, 6).real(),
            },
            expect: {
                c: [
                    0.93739718346085299,
                    4.4239228394344216e-2,
                    -0.15173200787719443,
                    5.2747525044565258e-2,
                    0.63978083857259449,
                    -1.5399500131607056,
                    -0.92856705188751221,
                    0.47456508426779292,
                    0.576356190905009,
                    -1.9269947615628395e-2,
                    -5.0828959555181574e-2,
                    -0.79900926351547241,
                    -1.147657036781311,
                    -0.28946158289909363,
                    0.74521718149851868,
                    -3.7345418217893611e-2,
                    -0.20255739350473001,
                    -0.89192110300064087,
                    0.43568331003189087,
                    -1.2375384569168091,
                    -0.22426788508892059,
                    0.88580873163531948,
                    -0.44580896581481733,
                    0.80418950319290161,
                    -5.7106774300336838e-2,
                    0.50360798835754395,
                    1.0857694149017334,
                    -0.69095385074615479,
                    0.71788870597228716,
                    4.6726170927286148e-2,
                    -0.23570655286312103,
                    -0.54288828372955322,
                    -0.43331032991409302,
                    -0.64947164058685303,
                    0.72675073146820068,
                    1.151911735534668,
                ],
            },
        },
    },
    ssyrkErrors: {
        case0: {
            desc: 'uplo !="ul"',
            input: {
                cmd: 'xdebug',
                uplo: 'x',
                trans: 't',
                n: 6,
                k: 3,
                alpha: 0,
                beta: 0,
                lda: 6,
                ldc: 6,
            },
        },
        case1: {
            desc: 'trans!="ntc"',
            input: {
                cmd: 'xdebug',
                uplo: 'l',
                trans: 'x',
                n: 6,
                k: 3,
                alpha: 0.2,
                beta: 0.3,
                lda: 6,
                ldc: 6,
            },
        },
        case2: {
            desc: 'n<0"',
            input: {
                cmd: 'xdebug',
                trans: 'n',
                uplo: 'u',
                k: 3,
                n: -6,
                lda: 6,
                ldc: 6,
                beta: 0.2,
                alpha: 0.3,
            },
        },
        case3: {
            desc: 'k<0',
            input: {
                cmd: 'xdebug',
                trans: 'n',
                uplo: 'u',
                k: -6,
                n: 4,
                lda: 6,
                ldc: 6,
                beta: 0.2,
                alpha: 0.3,
            },
        },
        case4: {
            desc: 'lda< max(1,nrowA)',
            input: {
                cmd: 'xdebug',
                trans: 't',
                uplo: 'u',
                k: 3,
                n: 6,
                lda: 2,
                ldc: 6,
                beta: 0.2,
                alpha: 0.3,
            },
        },
        case6: {
            desc: 'ldc< max(1,n)',
            input: {
                cmd: 'xdebug',
                trans: 't',
                uplo: 'u',
                k: 3,
                n: 6,
                lda: 6,
                ldc: 5,
                beta: 0.2,
                alpha: 0.3,
            },
        },
    },
};
